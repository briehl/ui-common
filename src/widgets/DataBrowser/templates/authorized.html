<div class="collapse" id="{{env.widgetName}}-more-info-{{env.instanceId}}"> 
    <div class="well">
        <p>This panel shows Data Objects in all of your Narratives.</p>
    </div>
</div>
<table class="table table-bordered table-striped hide" id="dashboard-data-widget-{{env.generatedId}}">
    <thead>
        <tr>
            <th>Object Name</th>
            <th>Type</th>
            <th>Version</th>
            <th>Narrative</th>
            <!--
           <th>In Your Narratives</th>
           <th>In Shared</th>
           <th>In Public</th>
          
           <th>Views</th>
           <th>Runs</th>
           
            -->
            <th>Version</th>
            <th>Last Modified</th>
        </tr>
    </thead>
    <tfoot>

    </tfoot>

    <tbody>
        {% for object in state.workspaceObjects %}

        <tr>
            <td><a href="/functional-site/#/dataview/{{object.info.wsid}}/{{object.info.id}}/{{object.info.version}}">{{object.info.name}}</a></td>
            <td>{{object.info.typeName}}</td>
            <td>{{object.info.typeMajorVersion}}.{{object.info.typeMinorVersion}}</td>
            <td><a href="/narrative/{{object.narrative.workspaceId}}/{{object.info.id}}">{{object.narrative.name}}</a></td>
            <!--
            <td>x</td>
            <td>x</td>
             
            <td>x</td>
            <td>{{object.save_by}}</td>
            
            -->
            <td>{{object.info.version}}</td>
            <td>{{object.info.save_date | jsDatestring | dateFormat}}</td>
        </tr>
        {% endfor %}
    </tbody>

</table>
<script>
    require(['jquery'], function ($) {
        $('#dashboard-data-widget-{{env.generatedId}}').dataTable({
            initComplete: function (settings) {
                var api = this.api();
                var rowCount = api.data().length;
                var pageSize = api.page.len();
                var wrapper = api.settings()[0].nTableWrapper;
                if (rowCount <= pageSize) {
                    $(wrapper).find('.dataTables_paginate').closest('.row').hide();
                    $(wrapper).find('.dataTables_filter').closest('.row').hide();
                }
                
                $(settings.nTable).removeClass('hide');
            }
        });
        /*$('#dashboard-data-widget-{{env.generatedId}}').DataTable({
         scrollY: '400px',
         scrollCollapse: true,
         paging: false
         });*/
    });
</script>
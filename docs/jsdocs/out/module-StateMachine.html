<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: StateMachine</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: StateMachine</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>An object which which allows state to be used asynchronously.
It solves the problem of arbitrary asynchronously loaded modules, for 
example widgets, to access shared state when that shared state is also 
available asynchronously. 
The basic solutions are syncronous access, persisten listeners, one-time
listeners, and promise wrappers.</p></div>
        

        
            















<dl class="details">

    
    <dt class="tag-version">Version:</dt>
    <dd class="tag-version"><ul class="dummy"><li>0.0.2</li></ul></dd>
    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li><a href="mailto:eapearson@lbl.gov">Erik Pearson</a></li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>complete testing</li>
        
            <li>determine if methods are unused, and if so, remove them</li>
        </ul>
    </dd>
    
</dl>
















        
    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="~delItem"><span class="type-signature">(inner) </span>delItem<span class="signature">(key)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Delete a state property.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#PropertyPath">PropertyPath</a></span>


            
            </td>

            

            

            <td class="description last"><p>the path to the state property to be removed.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line244">line 244</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>this needs to be communicated to subscribers</li>
        
            <li>then the subscribtions need to be removed.</li>
        
            <li>actually they are part of the state object??</li>
        </ul>
    </dd>
    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>true if the object was found and deleted, false
otherwise.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~getItem"><span class="type-signature">(inner) </span>getItem<span class="signature">(key, defaultValue)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Return the value of the state object as specified by the property path
into the state object. Although this will work for sub-properties, 
the state machine is not yet designed to do anything special, so best
to just use top level keys.
This method is synchronous, so if the state object is not yet set,
it will return undefined or the default value if provided.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#PropertyPath">PropertyPath</a></span>


            
            </td>

            

            

            <td class="description last"><p>the key to the state object desired</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>defaultValue</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#Any">Any</a></span>


            
            </td>

            

            

            <td class="description last"><p>a value to return if the state object was
not found.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line131">line 131</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>{Any) either the state object, the default value, or undefined.</p>
</div>



    



        
            

    

    <h4 class="name" id="~hasError"><span class="type-signature">(inner) </span>hasError<span class="signature">(key)</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Used to determine if the state property is in an error state.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#PropertyPath">PropertyPath</a></span>


            
            </td>

            

            

            <td class="description last"><p>the path to the state property in 
question.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line220">line 220</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>true if the state property is in an error state, 
false otherwise.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~hasItem"><span class="type-signature">(inner) </span>hasItem<span class="signature">({PropertyPath{})</span><span class="type-signature"> &rarr; {boolean}</span></h4>

    



<div class="description">
    <p>Use this method to determine whether or not the state property
exists.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>{PropertyPath{}</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"><p>key - the key to the state object desired.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line157">line 157</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>true if the property was found, false otherwise.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~listen"><span class="type-signature">(inner) </span>listen<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>A short synonym for listenForItem.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line259">line 259</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>listenForItem</li>
        </ul>
    </dd>
    

    
</dl>
















        
            

    

    <h4 class="name" id="~listenForItem"><span class="type-signature">(inner) </span>listenForItem<span class="signature">(key, cfg)</span><span class="type-signature"> &rarr; {this}</span></h4>

    



<div class="description">
    <p>Set up a listener for changes to a state property.
The listener may be configured to receive set, error, or delete
notifiations. In addition, the listener may be specified a
one-time, meaning that it will be removed from the listener list
after the first call. For the latter usage, though, whenItem may
be more convenient.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">StatePropertyKey</span>


            
            </td>

            

            

            <td class="description last"><p>a path to the state property</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>cfg</code></td>
            

            <td class="type">
            
                
<span class="param-type">ListenerConfig</span>


            
            </td>

            

            

            <td class="description last"><p>a simple object to configure the listener.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line280">line 280</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>a reference to the state machine to enable chaining.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">this</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~setError"><span class="type-signature">(inner) </span>setError<span class="signature">(key, err)</span><span class="type-signature"> &rarr; {this}</span></h4>

    



<div class="description">
    <p>Sets a state property into an error state.
This should be called when an attempt to obtain the state value 
results in an error condition.</p>
<p>The error condition is communicated through the standard listener
mechanism, so that consumers can reflect the current state.
The onError method, if provideded by a listener, is called with the
error object.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#PropertyPath">PropertyPath</a></span>


            
            </td>

            

            

            <td class="description last"><p>the property path to the state object.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>err</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#Any">Any</a></span>


            
            </td>

            

            

            <td class="description last"><p>the error object generated by the attempt to
obtain the state property.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line181">line 181</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>a reference to the state machine object to allow chaining.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">this</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~setItem"><span class="type-signature">(inner) </span>setItem<span class="signature">(key, value)</span><span class="type-signature"> &rarr; {this}</span></h4>

    



<div class="description">
    <p>Sets a state object for the given property path.
The setting of a state object may trigger listener callbacks.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#PropertyPath">PropertyPath</a></span>


            
            </td>

            

            

            <td class="description last"><p>a path to an object stored in the state.
At present only top-level properties are suppored.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#Any">Any</a></span>


            
            </td>

            

            

            <td class="description last"><p>a value to be stored on this state property.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line85">line 85</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>a reference to the object to allow chaining</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">this</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~whenItem"><span class="type-signature">(inner) </span>whenItem<span class="signature">(key)</span><span class="type-signature"> &rarr; {promise}</span></h4>

    



<div class="description">
    <p>This differs from listen in that it returns a promise that is 
fulfilled either now (the item is available) or when it is
first set (via a set of one-time listeners).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>key</code></td>
            

            <td class="type">
            
                
<span class="param-type">StatePropertyKey</span>


            
            </td>

            

            

            <td class="description last"><p>a path to the state property in question</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line331">line 331</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>a promise that will be fulfilled when the state
property has been initialized.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">promise</span>


    </dd>
</dl>

    



        
    

    
        <h3 class="subsection-title">Type Definitions</h3>

        
                

    

    <h4 class="name" id="~Any"><span class="type-signature"></span>Any<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Any Javsascript type.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line30">line 30</a>
    </li></ul></dd>
    

    

    

    
</dl>
















            
                
<h4 class="name" id="~PropertyPath">PropertyPath</h4>




<div class="description">
    <p>An ordered list of properties that specify a path into an object. Each
path item represents a property name of the current object. The first 
item represents a property of the immediate object, the second a property
of the value of the first property, if that contained an object, and so
forth. The canonical representation is an array of strings, but a string
with property components separated by dots is a natural and easier form
for people.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">string</span>
|

<span class="param-type">Array.&lt;string></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="kbaseStateMachine.js.html">kbaseStateMachine.js</a>, <a href="kbaseStateMachine.js.html#line18">line 18</a>
    </li></ul></dd>
    

    

    

    
</dl>






            
    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-AsyncQueue.html">AsyncQueue</a></li><li><a href="module-AsyncQueue_AsyncQueue.html">AsyncQueue/AsyncQueue</a></li><li><a href="module-StateMachine.html">StateMachine</a></li><li><a href="module-Test.html">Test</a></li><li><a href="module-Utils.html">Utils</a></li></ul><h3>Interfaces</h3><ul><li><a href="Panel.html">Panel</a></li><li><a href="Widget.html">Widget</a></li></ul><h3>Global</h3><ul><li><a href="global.html">fileSizeFormat</a></li><li><a href="global.html#getKBaseSesssion">getKBaseSesssion</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html">niceTimestamp</a></li><li><a href="global.html#refreshSession">refreshSession</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.2</a> on Mon Aug 03 2015 17:14:33 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>